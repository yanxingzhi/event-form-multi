<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æ´»å‹•æŠ¥åç³»ç»Ÿ | Event Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: sans-serif; max-width: 600px; margin: auto; }
  label { display: block; margin-top: 12px; }
  select, input, textarea { width: 100%; padding: 8px; margin-top: 4px; }
  button { margin-top: 16px; padding: 10px; }
  .lang-switch { margin-bottom: 20px; }
</style>
</head>
<body>

<div class="lang-switch">
  <label for="langSelect">ğŸŒ Language / è¨€èª / è¯­è¨€:</label>
  <select id="langSelect">
    <option value="ja">æ—¥æœ¬èª</option>
    <option value="en">English</option>
    <option value="zh">ä¸­æ–‡</option>
  </select>
</div>

<form id="eventForm">
  <label data-i18n="eventName">ã‚¤ãƒ™ãƒ³ãƒˆå / Event Name / æ´»åŠ¨åç§°</label>
  <input type="text" name="eventName" required>

  <label data-i18n="name">ãŠåå‰ / Name / å§“å</label>
  <input type="text" name="name" required>

  <label data-i18n="sex">æ€§åˆ¥ / Sex / æ€§åˆ«</label>
  <select name="sex" required>
    <option value="">--</option>
    <option value="Male" data-i18n="male">ç”·æ€§ / Male / ç”·</option>
    <option value="Female" data-i18n="female">å¥³æ€§ / Female / å¥³</option>
  </select>

  <label data-i18n="nationality">å›½ç± / Nationality / å›½ç±</label>
  <input type="text" name="nationality" required>

  <label data-i18n="phone">é›»è©±ç•ªå· / Phone Number / ç”µè¯</label>
  <input type="tel" name="phone" required>

  <label data-i18n="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ / Email Address / é‚®ç®±</label>
  <input type="email" name="email" required>

  <label data-i18n="school">å­¦æ ¡ååˆã¯å‹¤å‹™å…ˆ / School or Workplace / å­¦æ ¡æˆ–å•ä½</label>
  <input type="text" name="school">

  <label data-i18n="message">è³ªå• / Message / ç•™è¨€</label>
  <textarea name="message"></textarea>

  <input type="hidden" name="activityId" value="">

  <button type="submit" data-i18n="submit">é€ä¿¡ / Submit / æäº¤</button>
</form>

<script>
const translations = {
  ja: {
    eventName: "ã‚¤ãƒ™ãƒ³ãƒˆå",
    name: "ãŠåå‰",
    sex: "æ€§åˆ¥",
    male: "ç”·æ€§",
    female: "å¥³æ€§",
    nationality: "å›½ç±",
    phone: "é›»è©±ç•ªå·",
    email: "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",
    school: "å­¦æ ¡ååˆã¯å‹¤å‹™å…ˆ",
    message: "è³ªå•",
    submit: "é€ä¿¡"
  },
  en: {
    eventName: "Event Name",
    name: "Name",
    sex: "Sex",
    male: "Male",
    female: "Female",
    nationality: "Nationality",
    phone: "Phone Number",
    email: "Email Address",
    school: "School or Workplace",
    message: "Message or Question",
    submit: "Submit"
  },
  zh: {
    eventName: "æ´»åŠ¨åç§°",
    name: "å§“å",
    sex: "æ€§åˆ«",
    male: "ç”·",
    female: "å¥³",
    nationality: "å›½ç±",
    phone: "ç”µè¯",
    email: "é‚®ç®±",
    school: "å­¦æ ¡æˆ–å•ä½",
    message: "ç•™è¨€",
    submit: "æäº¤"
  }
};

document.getElementById('langSelect').addEventListener('change', function() {
  const lang = this.value;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
});

document.getElementById('eventForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  if (!confirm("Are you sure you want to submit? / ç¢ºèªã—ã¾ã™ã‹ï¼Ÿ / ç¡®è®¤æäº¤å—ï¼Ÿ")) {
    return;
  }

  const formData = Object.fromEntries(new FormData(e.target).entries());

  const res = await fetch('/api/submit', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(formData)
  });

  if (res.ok) {
    alert('Success! / æˆåŠŸã—ã¾ã—ãŸï¼ / æäº¤æˆåŠŸï¼');
    e.target.reset();
  } else {
    alert('Error! / ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ / æäº¤å¤±è´¥ï¼');
  }
});
</script>

</body>
</html>
